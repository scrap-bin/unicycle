services:
#
# Database Abstraction and Data Mapper
#
    db:
        class: "%dbal_class%"
        arguments:
            - "%db_params%"

    entity_manager:
        class: R2\ORM\EntityManager
        arguments: [ "@db" ]

#
# Internatianalization
#
    i18n:
        class: R2\Translation\Translator
        arguments: ["@i18n_loader", "%fallback_lang%"]
        settings: { setLocale: ["%default_lang%"] }

    i18n_loader:
        class: R2\Application\LangLoader
        arguments: ["%root_dir%/translations", "%root_dir%/cache"]
